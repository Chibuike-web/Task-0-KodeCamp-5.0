<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>REST Countries API with color theme switcher</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<nav>
			<header>
				<h1>Where in the world</h1>
				<figure class="toggle-theme">
					<img src="./assets/moon-outline.svg" alt="Moon Icon" />
					<span>Dark Mode</span>
				</figure>
			</header>
		</nav>
		<section>
			<div class="search-input-container">
				<img src="./assets/search-outline.svg" alt="" />
				<input
					type="search"
					name=""
					id=""
					class="search-input"
					placeholder="Search for a country..."
				/>
			</div>
		</section>
		<section>
			<ul id="country-list"></ul>
		</section>
	</body>

	<!-- JavaScript -->

	<script type="module">
		const countryList = document.getElementById("country-list");

		const fetchData = async () => {
			try {
				const res = await fetch("https://restcountries.com/v3.1/all");
				if (!res.ok) {
					throw new Error("Issue fetching data");
				}
				const data = await res.json();
				createList(data);
			} catch (error) {
				console.log("Issue fetching lists", error);
			}
		};

		const createList = (countries) => {
			countries.forEach((country) => {
				const list = document.createElement("li");
				list.classList.add("country-card");

				list.innerHTML = `
		   <a href="details.html?code=${country.cca3}">
		       <figure> <img src="${country.flags.svg}" alt="Flag of ${country.name.common}" /></figure>
		        <div class="content">
		          <h3 class="heading">${country.name.common}</h3>
		          <p><strong>Population:</strong> ${country.population.toLocaleString()}</p>
		          <p><strong>Region:</strong> ${country.region}</p>
		          <p><strong>Capital:</strong> ${country.capital?.[0] || "N/A"}</p>
		        </div>
		      </a>
		    `;

				countryList.appendChild(list);
			});
		};

		fetchData();
	</script>
</html>
