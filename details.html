<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Country Details</title>
		<link rel="stylesheet" href="style.css" />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Nunito+Sans:ital,opsz,wght@0,6..12,200..1000;1,6..12,200..1000&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body>
		<nav class="container">
			<header>
				<h1>Where in the world</h1>
				<figure class="toggle-theme">
					<img src="./assets/moon-outline.svg" alt="Moon Icon" />
					<span>Dark Mode</span>
				</figure>
			</header>
		</nav>

		<section class="container">
			<a href="index.html">‚Üê Back</a>
			<div id="country-details"></div>
		</section>

		<!-- Javascript -->

		<script type="module">
			const container = document.getElementById("country-details");
			const urlParams = new URLSearchParams(window.location.search);
			console.log(urlParams);
			const code = urlParams.get("code");

			const fetchCountry = async () => {
				try {
					const res = await fetch(`https://restcountries.com/v3.1/alpha/${code}`);
					const data = await res.json();
					const country = data[0];

					container.innerHTML = `
          <img src="${country.flags.svg}" alt="Flag of ${country.name.common}" />
          <h2>${country.name.common}</h2>
          <p><strong>Population:</strong> ${country.population.toLocaleString()}</p>
          <p><strong>Region:</strong> ${country.region}</p>
          <p><strong>Capital:</strong> ${country.capital?.[0] || "N/A"}</p>
          <p><strong>Subregion:</strong> ${country.subregion || "N/A"}</p>
          <p><strong>Languages:</strong> ${Object.values(country.languages || {}).join(", ")}</p>
        `;
				} catch (error) {
					container.innerHTML = "<p>Could not load country data.</p>";
				}
			};

			if (code) {
				fetchCountry();
			} else {
				container.innerHTML = "<p>No country selected.</p>";
			}
		</script>
	</body>
</html>
